<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title img src="Log.jpg">Encomendas</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="css/encomendas.css">
    <link rel="stylesheet" href="css/inicio.css">
    <link href="https://api.fontshare.com/v2/css?f[]=clash-display@400,500&display=swap" rel="stylesheet">
    <script>
      // Função para ordernar colunas com numeros
      function ordenarColunaNumero(ordernarAsc, coluna) {
        var table, rows, switching, i, x, y, shouldSwitch;
        table = document.getElementById("tabela_encomendas");
        switching = true;

        while (switching) {

          switching = false;
          rows = table.rows;
          
          for (i = 1; i < (rows.length - 1); i++) {

            shouldSwitch = false;

            x = rows[i].getElementsByTagName("TD")[coluna];
            y = rows[i + 1].getElementsByTagName("TD")[coluna];

            if (ordernarAsc && parseInt(x.innerHTML) < parseInt(y.innerHTML) || !ordernarAsc && parseInt(x.innerHTML) > parseInt(y.innerHTML)) {
              shouldSwitch = true;
              break;
            }
          }
          if (shouldSwitch) {
            rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
            switching = true;
          }
        }
      }

      // Função para ordernar colunas com texto
      function ordenarColunaTexto(ordernarAsc, coluna) {
        var table, rows, switching, i, x, y, shouldSwitch;
        table = document.getElementById("tabela_encomendas");
        switching = true;

        while (switching) {

          switching = false;
          rows = table.rows;
          
          for (i = 1; i < (rows.length - 1); i++) {

            shouldSwitch = false;

            x = rows[i].getElementsByTagName("TD")[coluna];
            y = rows[i + 1].getElementsByTagName("TD")[coluna];

            if (
              (ordernarAsc && x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) || 
              (!ordernarAsc && x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase())
              ) {
              shouldSwitch = true;
              break;
            }
          }
          if (shouldSwitch) {
            rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
            switching = true;
          }
        }
      }

      // Função para criar a data no formato de Date
      function parseData(data){
        var parts = data.split("/");
        var day = parseInt(parts[0]);
        var month = parseInt(parts[1]) - 1;
        var year = parseInt(parts[2]);
        return new Date(year, month, day);
      }

      // Função para ordernar colunas com datas
      function ordenarColunaData(ordernarAsc, coluna) {
        var table, rows, switching, i, x, y, shouldSwitch;
        table = document.getElementById("tabela_encomendas");
        switching = true;

        while (switching) {

          switching = false;
          rows = table.rows;
          
          for (i = 1; i < (rows.length - 1); i++) {

            shouldSwitch = false;

            x = rows[i].getElementsByTagName("TD")[coluna];
            y = rows[i + 1].getElementsByTagName("TD")[coluna];

            if (
              (ordernarAsc && parseDate(x.innerHTML) < parseDate(y.innerHTML)) || 
              (!ordernarAsc && parseDate(x.innerHTML) > parseDate(y.innerHTML))
              ) {
              shouldSwitch = true;
              break;
            }
          }
          if (shouldSwitch) {
            rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
            switching = true;
          }
        }
      }
    </script>
</head>
    
<body>
  <nav>
    <ul class="navbar">
      <li>
        <img class="logo" src="./img/logo.png" alt="logo">
      </li>
      <li>
        <a href="./inicio.html">Início</a>
      </li>
        <li>
          <a href="./loja.html">Loja</a>
        </li>
        <li>
          <a href="./carrinho.html">Carrinho</a>
        </li>
        <li>
          <a href="./encomendas.html">Encomendas</a>
        </li>
        <li>
          <a href="./login.html">Login / Registo</a>
        </li>
      </ul>
    </nav>
    <div class="conteudo">
      <table class="tabela" id="tabela_encomendas">
        <thead>
          <tr>
            <th>
              <div>
                <div>Nº</div>
                <div class="setasOrdenacao">
                  <span onclick="ordenarColunaNumero(false, 0)">&uarr;</span>
                  <span onclick="ordenarColunaNumero(true, 0)">&darr;</span>
                </div>
              </div>
            </th>
            <th>
              <div>
                <div>Items comprados</div>
                <div class="setasOrdenacao">
                  <span onclick="ordenarColunaTexto(false, 1)">&uarr;</span>
                  <span onclick="ordenarColunaTexto(true, 1)">&darr;</span>
                </div>
              </div>
            </th>
            <th>
              <div>
                <div>Total</div>
                <div class="setasOrdenacao">
                  <span onclick="ordenarColunaNumero(false, 2)">&uarr;</span>
                  <span onclick="ordenarColunaNumero(true, 2)">&darr;</span>
                </div>
              </div>
            </th>
            <th>
              <div>
                <div>Data</div>
                <div class="setasOrdenacao">
                  <span onclick="ordenarColunaData(false, 3)">&uarr;</span>
                  <span onclick="ordenarColunaData(true, 3)">&darr;</span>
                </div>
              </div>
            </th>
            <th>
              <div>
                <div>Estado</div>
                <div class="setasOrdenacao">
                  <span onclick="ordenarColunaTexto(false, 4)">&uarr;</span>
                  <span onclick="ordenarColunaTexto(true, 4)">&darr;</span>
                </div>
              </div>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>
              <span>Heineken <i>(x2)</i></span>
              <br/>
              <span>Super Bock <i>(x51)</i></span>
            </td>
            <td>25€</td>
            <td>07/01/2023</td>
            <td>Aguarda confirmação</td>
          </tr>
          <tr>
            <td>2</td>
            <td>
              <span>Castesll <i>(x10)</i></span>
            </td>
            <td>100€</td>
            <td>02/01/2023</td>
            <td>Em trânsito</td>
          </tr>
          <tr>
            <td>3</td>
            <td>
              <span>Cristal <i>(x251)</i></span>
            </td>
            <td>10€</td>
            <td>31/12/2022</td>
            <td>Finalizada</td>
          </tr>
          <tr>
            <td>4</td>
            <td>
              <span>Sagres <i>(x122)</i></span>
            </td>
            <td>100€</td>
            <td>31/08/2022</td>
            <td>Finalizada</td>
          </tr>
          <tr>
            <td>5</td>
            <td>
              <span>Heineken <i>(x30)</i></span>
            </td>
            <td>150€</td>
            <td>15/07/2022</td>
            <td>Finalizada</td>
          </tr>
        </tbody>
      </table>
    </div>
  </body>
</html>